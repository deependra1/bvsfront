"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[304],{75506:function(e,n,t){t.d(n,{_:function(){return h}});var i=t(74165),o=t(15861),r=t(56573),l=t(65470),a=t.n(l),s=t(77287),d=r.Z.create({baseURL:"https://bvsnepal.org/api",headers:{"Content-Type":"application/json"}});d.interceptors.request.use(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.headers.Authorization="Bearer ".concat((0,s.hP)()),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),d.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}));var c=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.Z.post("/auth/refresh/",{refresh:(0,s.YV)()},{baseURL:"https://bvsnepal.org/api"}).then((function(e){var t=e.data.access;n.response.config.headers.Authorization="Bearer "+t,localStorage.setItem("auth",JSON.stringify({access:t,refresh:(0,s.YV)(),user:(0,s.PR)()}))})).catch((function(){localStorage.removeItem("auth")})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function h(e){return d.get(e).then((function(e){return e.data}))}a()(d,c),n.Z=d},49304:function(e,n,t){t.r(n),t.d(n,{default:function(){return L}});var i=t(64611),o=t(9019),r=t(61113),l=t(42832),a=t(58467),s=t(1010),d=t(75506),c=t(19536),h=t(66212),u=t(29439),p=t(1413),m=t(45987),f=t(47313),_=t(23306),x=t(24631),v=t(15480),Z=t(49914),w=t(69099),g=t(17592),j=t(94469),y=t(33604),b=t(96467),C=t(4117),P=t(47131),S=t(11198),B=t(65954),F=t(51997),N=t(64229),E=t(90842),k=t(7410),D=t(3463),M=t(46417),z=["children","onClose"],R=(0,g.ZP)(j.Z)((function(e){var n=e.theme;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}}));function A(e){var n=e.children,t=e.onClose,i=(0,m.Z)(e,z);return(0,M.jsxs)(y.Z,(0,p.Z)((0,p.Z)({sx:{m:0,p:2}},i),{},{children:[n,t?(0,M.jsx)(P.Z,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,M.jsx)(S.Z,{})}):null]}))}function I(){var e=f.useState(!1),n=(0,u.Z)(e,2),t=n[0],i=n[1],c=(0,a.UO)().patientId,h=(0,E.Ds)().enqueueSnackbar,p=f.useState(c),m=(0,u.Z)(p,2),g=m[0],j=m[1],y=f.useState({}),S=(0,u.Z)(y,2),z=S[0],I=S[1];f.useEffect((function(){j(c)}),[c]);var L=(0,s.ZP)("/patient/".concat(g,"/pshychosocial/"),d._,{revalidateOnMount:!0}),O=L.data,V=L.error,W=L.isLoading,H=L.mutate,U=[{field:"client_history",headerName:"Client History",width:100,editable:!0},{field:"client_complain",headerName:"Client Complain",width:100,editable:!0},{field:"intervention",headerName:"Intervention",width:100,editable:!0},{field:"changes_after_intervention",headerName:"Changes After Intervention",width:100,editable:!0},{field:"detailed_followup_report",headerName:"Detailed Followup Report",width:100,editable:!0},{field:"followup_summary",headerName:"Followup Summary",width:100,editable:!0},{field:"mode_of_followup",headerName:"Mode of Followup",width:100,editable:!0},{field:"followed_by",headerName:"Followed By",width:100,editable:!0},{field:"actions",headerName:"Actions",type:"actions",width:100,renderCell:function(e){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(P.Z,{onClick:function(){return q(e)},sx:{color:"#9c27b0"},children:(0,M.jsx)(B.Z,{})}),(0,M.jsx)(P.Z,{onClick:function(){return Y(e.id)},sx:{color:"#f44336"},children:(0,M.jsx)(F.Z,{})})]})}}],T=function(){i(!1)},q=function(e){I(e.row),i(!0)},Y=function(e){confirm("Are you sure to delete pshychosocial data?")&&d.Z.delete("/patient/".concat(c,"/pshychosocial/").concat(e,"/")).then((function(){h("pshychosocial Deleted successfully!!!",{variant:"success"}),H()})).catch((function(){h("something wents wrong!!!",{variant:"error"})}))};return W?(0,M.jsx)("div",{children:"Loading..."}):V?(0,M.jsx)("div",{children:"Error on Treatment"}):(0,M.jsxs)("div",{children:[(0,M.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,M.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,M.jsx)(r.Z,{variant:"h3",gutterBottom:!0,children:"Pshychosocial Detail"})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:2,children:(0,M.jsx)(w.Z,{variant:"outlined",onClick:function(){i(!0)},children:"Add Pshychosocial"})})]}),(0,M.jsx)(N._,{rows:O,columns:U,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],disableRowSelectionOnClick:!0}),(0,M.jsxs)(R,{onClose:T,"aria-labelledby":"customized-dialog-title",open:t,children:[(0,M.jsx)(A,{id:"customized-dialog-title",onClose:T,children:z.id?"Update Pshyosocial Data":"Add Pshyosocial Data"}),(0,M.jsx)(k.J9,{enableReinitialize:!0,initialValues:{patient:c,client_history:(null===z||void 0===z?void 0:z.client_history)||"",client_complain:(null===z||void 0===z?void 0:z.client_complain)||"",intervention:(null===z||void 0===z?void 0:z.intervention)||"",changes_after_intervention:(null===z||void 0===z?void 0:z.changes_after_intervention)||"",detailed_followup_report:(null===z||void 0===z?void 0:z.detailed_followup_report)||"",followup_summary:(null===z||void 0===z?void 0:z.followup_summary)||"",mode_of_followup:(null===z||void 0===z?void 0:z.mode_of_followup)||"",followed_by:(null===z||void 0===z?void 0:z.followed_by)||""},validationSchema:D.Ry().shape({client_history:D.Z_().required("Client History is required")}),onSubmit:function(e,n){var t=n.setErrors,o=n.setStatus,r=n.setSubmitting;z.id?d.Z.put("/patient/".concat(c,"/pshychosocial/").concat(z.id,"/"),e).then((function(){h("pshychosocial updated successfully!!!",{variant:"success"}),o({success:!1}),r(!1),H(),I({})})).catch((function(e){h("Something went wrong while adding the pshychosocial!!!",{variant:"error"}),o({success:!1}),t({submit:e.message}),r(!1)})):d.Z.post("/patient/".concat(c,"/pshychosocial/"),e).then((function(){h("Patient added successfully!!!",{variant:"success"}),o({success:!1}),r(!1),H()})).catch((function(e){h("Something went wrong while adding the patient!!!",{variant:"error"}),o({success:!1}),t({submit:e.message}),r(!1)})),i(!1)},children:function(e){var n=e.errors,t=e.handleChange,i=e.handleSubmit,r=e.isSubmitting,a=e.touched,s=e.values,d=e.handleBlur;return(0,M.jsxs)(k.l0,{noValidate:!0,children:[(0,M.jsx)(b.Z,{dividers:!0,children:(0,M.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"client_history",children:"Client History"}),(0,M.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:3,value:s.client_history,name:"client_history",onBlur:d,onChange:t,placeholder:"Enter client_history name",error:Boolean(a.client_history&&n.client_history)}),a.client_history&&n.client_history&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-client_history",children:n.client_history})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"client_complain",children:"Client Complain"}),(0,M.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:3,value:s.client_complain,name:"client_complain",onBlur:d,onChange:t,placeholder:"Enter client_complain name",error:Boolean(a.client_complain&&n.client_complain)}),a.client_complain&&n.client_complain&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-client_complain",children:n.client_complain})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"intervention",children:"Intervention"}),(0,M.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:3,value:s.intervention,name:"intervention",onBlur:d,onChange:t,placeholder:"Enter intervention name",error:Boolean(a.intervention&&n.intervention)}),a.intervention&&n.intervention&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-intervention",children:n.intervention})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"changes_after_intervention",children:" Changes After Intervention"}),(0,M.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:3,value:s.changes_after_intervention,name:"changes_after_intervention",onBlur:d,onChange:t,placeholder:"Enter changes_after_intervention name",error:Boolean(a.changes_after_intervention&&n.changes_after_intervention)}),a.changes_after_intervention&&n.changes_after_intervention&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-changes_after_intervention",children:n.changes_after_intervention})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"detailed_followup_report",children:"Detailed Followup Report"}),(0,M.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:3,value:s.detailed_followup_report,name:"detailed_followup_report",onBlur:d,onChange:t,placeholder:"Enter detailed_followup_report name",error:Boolean(a.detailed_followup_report&&n.detailed_followup_report)}),a.detailed_followup_report&&n.detailed_followup_report&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-detailed_followup_report",children:n.detailed_followup_report})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"followup_summary",children:"Followup Summary"}),(0,M.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:3,value:s.followup_summary,name:"followup_summary",onBlur:d,onChange:t,placeholder:"Enter followup_summary name",error:Boolean(a.followup_summary&&n.followup_summary)}),a.followup_summary&&n.followup_summary&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-followup_summary",children:n.followup_summary})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"mode_of_followup",children:" Mode of Followup"}),(0,M.jsx)(x.Z,{fullWidth:!0,multiline:!0,rows:3,value:s.mode_of_followup,name:"mode_of_followup",onBlur:d,onChange:t,placeholder:"Enter mode_of_followup name",error:Boolean(a.mode_of_followup&&n.mode_of_followup)}),a.mode_of_followup&&n.mode_of_followup&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-mode_of_followup",children:n.mode_of_followup})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,M.jsxs)(l.Z,{spacing:1,children:[(0,M.jsx)(_.Z,{htmlFor:"followed_by",children:"Followed By"}),(0,M.jsx)(Z.Z,{fullWidth:!0,id:"followed_by",type:"text",value:s.followed_by,name:"followed_by",onBlur:d,onChange:t,placeholder:"Enter followed_by name",error:Boolean(a.followed_by&&n.followed_by)}),a.followed_by&&n.followed_by&&(0,M.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-followed_by",children:n.followed_by})]})})]})}),(0,M.jsxs)(C.Z,{children:[(0,M.jsx)(w.Z,{autoFocus:!0,variant:"outlined",disableElevation:!0,disabled:r,onClick:i,color:"primary",children:z.id?"Update":"Save"}),(0,M.jsx)(w.Z,{autoFocus:!0,variant:"outlined",color:"error",onClick:T,children:"Cancel"})]})]})}})]})]})}var L=function(){var e=(0,a.UO)().patientId,n=(0,s.ZP)("/patient/".concat(e,"/"),d._),t=n.data,u=n.error;return n.isLoading?(0,M.jsx)("div",{children:"Loading..."}):u?(0,M.jsx)("div",{children:"Error on Treatment"}):(0,M.jsx)(i.Z,{title:"Patients Phychosocial Detail",children:(0,M.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,M.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,M.jsx)(r.Z,{variant:"h1",align:"center",children:"BVS-NEPAL"})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,M.jsx)(r.Z,{variant:"h3",align:"center",children:t.registration_location})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:5,children:(0,M.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,M.jsx)(r.Z,{variant:"h5",color:"primary",children:"Patient Name:"}),(0,M.jsxs)(r.Z,{variant:"h6",children:[t.fname," ",t.mname," ",t.lname]})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:3}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,M.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,M.jsx)(r.Z,{variant:"h5",align:"right",color:"primary",children:"Registration No:"}),(0,M.jsx)(r.Z,{variant:"h6",align:"right",children:t.registration_number})]})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,M.jsx)(c.Z,{children:(0,M.jsx)(h.Z,{label:"PHYCHOSOCIAL",color:"primary"})})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,M.jsx)(I,{})})]})})}},11198:function(e,n,t){var i=t(91941);n.Z=void 0;var o=i(t(45045)),r=t(46417),l=(0,o.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");n.Z=l},51997:function(e,n,t){var i=t(91941);n.Z=void 0;var o=i(t(45045)),r=t(46417),l=(0,o.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=l},65954:function(e,n,t){var i=t(91941);n.Z=void 0;var o=i(t(45045)),r=t(46417),l=(0,o.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=l},33604:function(e,n,t){var i=t(1413),o=t(45987),r=t(47313),l=t(83061),a=t(21921),s=t(61113),d=t(17592),c=t(77342),h=t(93174),u=t(63909),p=t(46417),m=["className","id"],f=(0,d.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),_=r.forwardRef((function(e,n){var t=(0,c.Z)({props:e,name:"MuiDialogTitle"}),s=t.className,d=t.id,_=(0,o.Z)(t,m),x=t,v=function(e){var n=e.classes;return(0,a.Z)({root:["root"]},h.a,n)}(x),Z=r.useContext(u.Z).titleId,w=void 0===Z?d:Z;return(0,p.jsx)(f,(0,i.Z)({component:"h2",className:(0,l.Z)(v.root,s),ownerState:x,ref:n,variant:"h6",id:null!=d?d:w},_))}));n.Z=_}}]);