"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[877],{75506:function(e,t,n){n.d(t,{_:function(){return h}});var a=n(74165),r=n(15861),i=n(56573),o=n(65470),d=n.n(o),c=n(77287),u=i.Z.create({baseURL:"https://bvsnepal.org/api",headers:{"Content-Type":"application/json"}});u.interceptors.request.use(function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers.Authorization="Bearer ".concat((0,c.hP)()),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}));var l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.post("/auth/refresh/",{refresh:(0,c.YV)()},{baseURL:"https://bvsnepal.org/api"}).then((function(e){var n=e.data.access;t.response.config.headers.Authorization="Bearer "+n,localStorage.setItem("auth",JSON.stringify({access:n,refresh:(0,c.YV)(),user:(0,c.PR)()}))})).catch((function(){localStorage.removeItem("auth")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function h(e){return u.get(e).then((function(e){return e.data}))}d()(u,l),t.Z=u},51877:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(64611),r=n(74165),i=n(15861),o=n(93433),d=n(29439),c=n(47313),u=n(99881),l=n(85281),h=n(9019),s=n(24631),f=n(69099),m=n(35099),p=n(85833),w=n(1010),_=n(75506),N=[{field:"registration_number",headerName:"Registration Number",width:150,editable:!0},{field:"fiscal_year",headerName:"Fiscal Year",width:100,editable:!0},{field:"registration_date",headerName:"Registration Date",width:150,editable:!0},{field:"registration_location",headerName:"Branch Office",width:150,editable:!0},{field:"fullName",headerName:"Full name",width:200,valueGetter:function(e){return"".concat(e.row.fname||""," ").concat(e.row.mname||""," ").concat(e.row.lname||"")}},{field:"age",headerName:"Age at Incident",width:200,valueGetter:function(e){return"".concat(e.row.age_at_incident||""," years ").concat(e.row.month_at_incident||""," months ").concat(e.row.day_at_incident||""," days")}},{field:"age_group",headerName:"Age Group",width:100},{field:"gender",headerName:"Gender",width:100},{field:"citizenship_no",headerName:"Citizenship No",width:150},{field:"patient_contact",headerName:"Patient Contact",width:150},{field:"optional_contact",headerName:"Optional Contact",width:150},{field:"parents_contact",headerName:"Parents Contact",width:150},{field:"person_at_hospital",headerName:"Person at Hospital",width:150},{field:"relation_to_parent",headerName:"Relation to Patient",width:150},{field:"person_contact",headerName:"Person Contact",width:150},{field:"patient_education",headerName:"Education",width:150},{field:"patient_language",headerName:"Language",width:150},{field:"patient_occupation",headerName:"Occupation",width:150,valueGetter:function(e){return"".concat(e.row.patient_occupation.occupation_name||"")}},{field:"ethnic_group",headerName:"Ethnicity",width:250,valueGetter:function(e){return"".concat(e.row.ethnic_group.ethnic_group||"")}},{field:"religion",headerName:"Religion",width:150,valueGetter:function(e){return"".concat(e.row.religion.religion||"")}},{field:"material_status",headerName:"Marital Status",width:150},{field:"provence",headerName:"Province(P)",width:150},{field:"district",headerName:"District(P)",width:150},{field:"local",headerName:"Local Level(p)",width:200},{field:"ward",headerName:"Ward(p)",width:100},{field:"tole",headerName:"Tole(P)",width:200},{field:"foreign_address",headerName:"Foreign Address(P)",width:250},{field:"provence2",headerName:"Province(T)",width:150},{field:"district2",headerName:"District(T)",width:150},{field:"local2",headerName:"Local Level(T)",width:200},{field:"ward2",headerName:"Ward(T)",width:100},{field:"tole2",headerName:"Tole(T)",width:200},{field:"foreign_address2",headerName:"Foreign Address(T)",width:250},{field:"family_type",headerName:"Family Type",width:200,valueGetter:function(e){return"".concat(e.row.family_type.family_type||"")}},{field:"suppose_occupation",headerName:"Spouse Occupation",width:200,valueGetter:function(e){return"".concat(e.row.suppose_occupation.occupation_name||"")}},{field:"parents_occupation",headerName:"Parents Occupation",width:200,valueGetter:function(e){return"".concat(e.row.parents_occupation.occupation_name||"")}},{field:"number_of_child",headerName:"Number of Child",width:150},{field:"number_of_siblings",headerName:"Number of Siblings",width:150},{field:"economic_status",headerName:"Economic Status",width:150},{field:"family_support",headerName:"Family Support",width:150},{field:"pregnant_women",headerName:"Pregnant Women",width:150},{field:"lactating_mother",headerName:"Lactating Mother",width:150},{field:"with_disabilities",headerName:"With Disabilities",width:150},{field:"mental_illness",headerName:"With Mental Illness",width:150},{field:"epilepsy",headerName:"With Epilepsy",width:150},{field:"hiv_positive",headerName:"With HIV",width:150},{field:"echo_other",headerName:"Other",width:150},{field:"date_of_incident",headerName:"Date of Incident",width:150,valueGetter:function(e){return"".concat(new Date(e.row.date_of_incident).toDateString()||"")}},{field:"area_of_burn",headerName:"Area of Burn",width:100},{field:"percentage_of_burn",headerName:"Percentage Of Burn",width:150},{field:"degree_of_burn",headerName:"Degree Of Burn",width:100},{field:"burn_cause",headerName:"Causes of Burn",width:150,valueGetter:function(e){return"".concat(e.row.burn_cause.burn_cause||"")}},{field:"burn_type",headerName:"Types of Burn ",width:150,valueGetter:function(e){return"".concat(e.row.burn_type.burn_type||"")}},{field:"place_of_incident",headerName:"Place of Incident",width:150},{field:"description_of_incident",headerName:"Description of Incident",width:200},{field:"hospital",headerName:"Hospital Name",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.hospital})).join(" "))}},{field:"hospitalized",headerName:"Hospitalized Date",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return new Date(e.hospitalized_date).toDateString()})).join(" "))}},{field:"doctor_name",headerName:"Doctor Name",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.doctor_name})).join(" "))}},{field:"dischared_date",headerName:"Dischared Date",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return new Date(e.dischared_date).toDateString()})).join(" "))}},{field:"expired_date",headerName:"Expired Date",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return new Date(e.expired_date).toDateString()})).join(" "))}},{field:"mode_of_transport",headerName:"Mode of Transport",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.mode_of_transport})).join(" "))}},{field:"distance",headerName:"Distance(KM)",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.distance})).join(" "))}},{field:"time",headerName:"Time(Houres)",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.time})).join(" "))}},{field:"duration_of_stay",headerName:"Duration of Stay",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.duration_of_stay})).join(" "))}},{field:"no_of_surgery",headerName:"NO of Surgery",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.no_of_surgery})).join(" "))}},{field:"no_of_skin_graft",headerName:"No of Skin Graft",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.no_of_skin_graft})).join(" "))}},{field:"no_of_debridement",headerName:"No of Debridement",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.no_of_debridement})).join(" "))}},{field:"no_of_amputation",headerName:"No of Amputation",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.no_of_amputation})).join(" "))}},{field:"no_of_dressing",headerName:"No of Dressing",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.no_of_dressing})).join(" "))}},{field:"no_of_nutritional",headerName:"No of Nutritional Basket Provided",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.no_of_nutritional})).join(" "))}},{field:"medical_support",headerName:"No of Medical Support",width:200,valueGetter:function(e){return"".concat(e.row.treatment.map((function(e){return e.medical_support})).join(", "))}},{field:"initial_status",headerName:"Physiotherapie Initial Status",width:200,valueGetter:function(e){return"".concat(e.row.physiotherapy.map((function(e){return e.initial_status})).join(", "))}},{field:"applied_methods",headerName:"Applied Methods(Physiotherapie)",width:200,valueGetter:function(e){return"".concat(e.row.physiotherapy.map((function(e){return e.applied_methods})).join(", "))}},{field:"dischared_status",headerName:"Dischared Status(Physiotherapie)",width:200,valueGetter:function(e){return"".concat(e.row.physiotherapy.map((function(e){return e.dischared_status})).join(", "))}},{field:"observation",headerName:"Observation(Physiotherapie)",width:200,valueGetter:function(e){return"".concat(e.row.physiotherapy.map((function(e){return e.observation})).join(", "))}},{field:"current_status",headerName:"Current Status(Physiotherapie)",width:200,valueGetter:function(e){return"".concat(e.row.physiotherapy.map((function(e){return e.current_status})).join(", "))}},{field:"mode_of_followup",headerName:"Mode of Followup(Physiotherapie)",width:200,valueGetter:function(e){return"".concat(e.row.physiotherapy.map((function(e){return e.mode_of_followup})).join(", "))}},{field:"followed_by",headerName:"Followed By(Physiotherapie)",width:200,valueGetter:function(e){return"".concat(e.row.physiotherapy.map((function(e){return e.followed_by})).join(", "))}},{field:"client_history",headerName:"Client History(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.client_history})).join(", "))}},{field:"client_complain",headerName:"Client Complain(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.client_complain})).join(", "))}},{field:"intervention",headerName:"Intervention(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.intervention})).join(", "))}},{field:"changes_after_intervention",headerName:"Changes After Interventation(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.changes_after_intervention})).join(", "))}},{field:"detailed_followup_report",headerName:"Detailed Followup Report(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.detailed_followup_report})).join(", "))}},{field:"followup_summary",headerName:"Followup Summary(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.followup_summary})).join(", "))}},{field:"mode_of_followup",headerName:"Mode of Followup(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.mode_of_followup})).join(", "))}},{field:"followed_by",headerName:"Followed By(Psychosocials)",width:200,valueGetter:function(e){return"".concat(e.row.psychosocial.map((function(e){return e.followed_by})).join(", "))}},{field:"total_funding",headerName:"Total Funding",width:100}],v=n(46417),y=function(){var e=(0,c.useState)(""),t=(0,d.Z)(e,2),n=t[0],a=t[1],y=(0,c.useState)([]),g=(0,d.Z)(y,2),G=g[0],j=g[1],b=(0,c.useState)(!1),P=(0,d.Z)(b,2),S=P[0],Z=P[1],D=(0,c.useState)(!1),x=(0,d.Z)(D,2),C=x[0],k=x[1],F=(0,c.useState)([]),T=(0,d.Z)(F,2),O=T[0],B=T[1],I=(0,w.ZP)("/donor/",_._).data,A=(0,w.ZP)("/question/",_._).data;(0,c.useEffect)((function(){if(I){var e=I.map((function(e){return{field:e.donor_name,headerName:e.donor_name,width:200,valueGetter:function(t){return"".concat(t.row.funding_piv[e.donor_name]||"")}}}));B([].concat((0,o.Z)(N),(0,o.Z)(e)))}if(A){var t=A.map((function(e){return{field:e.questionnaire,headerName:e.questionnaire,width:200,valueGetter:function(t){return"".concat(t.row.reintegration[e.questionnaire]||"")}}}));B((function(e){return e?[].concat((0,o.Z)(e),(0,o.Z)(t)):t}))}}),[I,A]);var L=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,_.Z.get("/patient/?search=".concat(n));case 4:t=e.sent,j(t.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),k(!0),console.log("Something went wrong!!!",e.t0);case 12:Z(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return C?(0,v.jsx)("div",{children:(0,v.jsx)(u.Z,{severity:"error",children:"Something went wrong!!! \u2014 Please contact your service provider!"})}):S?(0,v.jsx)("div",{children:(0,v.jsx)(l.Z,{color:"success"})}):(0,v.jsx)("div",{children:(0,v.jsxs)(h.ZP,{container:!0,spacing:3,children:[(0,v.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,v.jsx)(s.Z,{variant:"outlined",placeholder:"Search...",value:n,onChange:function(e){a(e.target.value)}}),(0,v.jsx)(f.Z,{variant:"outlined",onClick:L,sx:{padding:1,marginLeft:1},children:"Search"})]}),(0,v.jsx)(h.ZP,{item:!0,xs:12,children:(0,v.jsx)(m._,{experimentalFeatures:{columnGrouping:!0},rows:G,columns:O,loading:S,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],disableRowSelectionOnClick:!0,slots:{toolbar:p.n}})})]})})},g=function(){return(0,v.jsx)(a.Z,{title:"Patients List",children:(0,v.jsx)(y,{})})}}}]);