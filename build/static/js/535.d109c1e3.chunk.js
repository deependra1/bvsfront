"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[535],{75506:function(e,n,r){r.d(n,{_:function(){return u}});var t=r(74165),o=r(15861),i=r(56573),a=r(65470),s=r.n(a),d=r(77287),c=i.Z.create({baseURL:"https://bvsnepal.org/api",headers:{"Content-Type":"application/json"}});c.interceptors.request.use(function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.headers.Authorization="Bearer ".concat((0,d.hP)()),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),c.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}));var l=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.Z.post("/auth/refresh/",{refresh:(0,d.YV)()},{baseURL:"https://bvsnepal.org/api"}).then((function(e){var r=e.data.access;n.response.config.headers.Authorization="Bearer "+r,localStorage.setItem("auth",JSON.stringify({access:r,refresh:(0,d.YV)(),user:(0,d.PR)()}))})).catch((function(){localStorage.removeItem("auth")})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function u(e){return c.get(e).then((function(e){return e.data}))}s()(c,l),n.Z=c},5535:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var t=r(9478),o=r(9019),i=r(61113),a=r(19536),s=r(66212),d=r(29439),c=r(1413),l=r(45987),u=r(47313),h=r(42832),m=r(23306),f=r(49914),p=r(15480),x=r(69099),Z=r(17592),v=r(94469),j=r(33604),g=r(96467),_=r(4117),b=r(47131),w=r(11198),C=r(65954),D=r(51997),P=r(6316),S=r(1010),y=r(75506),k=r(90842),z=r(7410),M=r(3463),A=r(46417),N=["children","onClose"],R=(0,Z.ZP)(v.Z)((function(e){var n=e.theme;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}}));function B(e){var n=e.children,r=e.onClose,t=(0,l.Z)(e,N);return(0,A.jsxs)(j.Z,(0,c.Z)((0,c.Z)({sx:{m:0,p:2}},t),{},{children:[n,r?(0,A.jsx)(b.Z,{"aria-label":"close",onClick:r,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,A.jsx)(w.Z,{})}):null]}))}function V(){var e=u.useState(!1),n=(0,d.Z)(e,2),r=n[0],t=n[1],a=(0,k.Ds)().enqueueSnackbar,s=u.useState({}),c=(0,d.Z)(s,2),l=c[0],Z=c[1],v=(0,S.ZP)("/donor/",y._,{revalidateOnMount:!0}),j=v.data,w=v.error,N=v.isLoading,V=v.mutate,E=[{field:"donor_name",headerName:"Donor Name",width:200,editable:!0},{field:"donor_address",headerName:"Donor Address",width:100,editable:!0},{field:"actions",headerName:"Actions",type:"actions",width:100,renderCell:function(e){return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(b.Z,{onClick:function(){return O(e)},sx:{color:"#9c27b0"},children:(0,A.jsx)(C.Z,{})}),(0,A.jsx)(b.Z,{onClick:function(){return F(e.id)},sx:{color:"#f44336"},children:(0,A.jsx)(D.Z,{})})]})}}],L=function(){t(!1)},O=function(e){Z(e.row),t(!0)},F=function(e){confirm("Are you sure to delete donro information?")&&y.Z.delete("/donor/".concat(e,"/")).then((function(){a("Patient Deleted successfully!!!",{variant:"success"}),V()})).catch((function(){a("something wents wrong!!!",{variant:"error"})}))};return N?(0,A.jsx)("div",{children:"Loading..."}):w?(0,A.jsx)("div",{children:"Error on Doner"}):(0,A.jsxs)("div",{children:[(0,A.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,A.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,A.jsx)(i.Z,{variant:"h3",gutterBottom:!0,children:"Donor Detail"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:6}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:2,children:(0,A.jsx)(x.Z,{variant:"outlined",onClick:function(){t(!0)},children:"Add Donor"})})]}),(0,A.jsx)(P._,{rows:j,columns:E,initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],disableRowSelectionOnClick:!0}),(0,A.jsxs)(R,{onClose:L,"aria-labelledby":"customized-dialog-title",open:r,children:[(0,A.jsx)(B,{id:"customized-dialog-title",onClose:L,children:l.id?"Update Treatment Data":"Add Treatment Data"}),(0,A.jsx)(z.J9,{enableReinitialize:!0,initialValues:{donor_name:(null===l||void 0===l?void 0:l.donor_name)||"",donor_address:(null===l||void 0===l?void 0:l.donor_address)||""},validationSchema:M.Ry().shape({donor_name:M.Z_().required("Donor name is required")}),onSubmit:function(e,n){var r=n.setErrors,o=n.setStatus,i=n.setSubmitting;l.id?y.Z.put("/donor/".concat(l.id,"/"),e).then((function(){a("Patient updated successfully!!!",{variant:"success"}),o({success:!1}),i(!1),V(),Z({})})).catch((function(e){a("Something went wrong while adding the donor!!!",{variant:"error"}),o({success:!1}),r({submit:e.message}),i(!1)})):y.Z.post("/donor/",e).then((function(){a("Donor added successfully!!!",{variant:"success"}),o({success:!1}),i(!1),V()})).catch((function(e){a("Something went wrong while adding the patient!!!",{variant:"error"}),o({success:!1}),r({submit:e.message}),i(!1)})),t(!1)},children:function(e){var n=e.errors,r=e.handleChange,t=e.handleSubmit,i=e.isSubmitting,a=e.touched,s=e.values,d=e.handleBlur;return(0,A.jsxs)(z.l0,{noValidate:!0,children:[(0,A.jsx)(g.Z,{dividers:!0,children:(0,A.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,A.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,A.jsxs)(h.Z,{spacing:1,children:[(0,A.jsx)(m.Z,{htmlFor:"donor",children:"Donor*"}),(0,A.jsx)(f.Z,{fullWidth:!0,id:"donor",type:"text",value:s.donor_name,name:"donor_name",onBlur:d,onChange:r,placeholder:"Enter donor name",error:Boolean(a.donor_name&&n.donor_name)}),a.donor_name&&n.donor_name&&(0,A.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-donor_name",children:n.donor_name})]})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,A.jsxs)(h.Z,{spacing:1,children:[(0,A.jsx)(m.Z,{htmlFor:"donor_address",children:"Donate Address"}),(0,A.jsx)(f.Z,{fullWidth:!0,id:"donor_address",type:"text",value:s.donor_address,name:"donor_address",onBlur:d,onChange:r,placeholder:"Enter donor_address name",error:Boolean(a.donor_address&&n.donor_address)}),a.donor_address&&n.donor_address&&(0,A.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-donor_address",children:n.donor_address})]})})]})}),(0,A.jsxs)(_.Z,{children:[(0,A.jsx)(x.Z,{autoFocus:!0,variant:"outlined",disableElevation:!0,disabled:i,onClick:t,color:"primary",children:l.id?"Update":"Save"}),(0,A.jsx)(x.Z,{autoFocus:!0,variant:"outlined",color:"error",onClick:L,children:"Cancel"})]})]})}})]})]})}var E=function(){return(0,A.jsx)(t.Z,{title:"Donor Information",children:(0,A.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,A.jsx)(i.Z,{variant:"h1",align:"center",children:"BVS-NEPAL"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,A.jsx)(i.Z,{variant:"h3",align:"center",children:"Donor Information"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,A.jsx)(a.Z,{children:(0,A.jsx)(s.Z,{label:"DONOR",color:"primary"})})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,A.jsx)(V,{})})]})})}},11198:function(e,n,r){var t=r(91941);n.Z=void 0;var o=t(r(45045)),i=r(46417),a=(0,o.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");n.Z=a},51997:function(e,n,r){var t=r(91941);n.Z=void 0;var o=t(r(45045)),i=r(46417),a=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=a},65954:function(e,n,r){var t=r(91941);n.Z=void 0;var o=t(r(45045)),i=r(46417),a=(0,o.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=a},33604:function(e,n,r){var t=r(1413),o=r(45987),i=r(47313),a=r(83061),s=r(21921),d=r(61113),c=r(17592),l=r(77342),u=r(93174),h=r(63909),m=r(46417),f=["className","id"],p=(0,c.ZP)(d.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),x=i.forwardRef((function(e,n){var r=(0,l.Z)({props:e,name:"MuiDialogTitle"}),d=r.className,c=r.id,x=(0,o.Z)(r,f),Z=r,v=function(e){var n=e.classes;return(0,s.Z)({root:["root"]},u.a,n)}(Z),j=i.useContext(h.Z).titleId,g=void 0===j?c:j;return(0,m.jsx)(p,(0,t.Z)({component:"h2",className:(0,a.Z)(v.root,d),ownerState:Z,ref:n,variant:"h6",id:null!=c?c:g},x))}));n.Z=x}}]);